# README

---

В рамках темы “операции ввода/вывода и переменные” я решил не ограничиваться линейным сценарием из последовательных
input()/print(), а сделать углублённую (но всё ещё учебную) реализацию, которая показывает, как эти механизмы устроены
“под капотом”, и применить её в полноценном консольном приложении.

---

## 1) Углубление темы I/O: свои аналоги input() и print()

Вместо стандартных `input()` и `print()` я реализовал собственные функции:

* `stdin()` — учебный аналог `input()`, работающий через `sys.stdin.readline()`
* `stdout()` — учебный аналог `print()`, работающий через `sys.stdout.write()`

Ключевые особенности реализации:

1. **Работа через потоки (`TextIO`)**

   * `stdout(..., file=...)` может писать в любой текстовый поток (например, файл или `io.StringIO()`).
   * `stdin(..., file=..., out=...)` может читать из произвольного текстового потока и печатать приглашение не только в stdout.

2. **Корректное поведение при EOF**

   * если поток ввода закончился (`readline()` вернул `''`), `stdin()` возбуждает `EOFError` — логика как у `input()`.

3. **Корректная обработка конца строки**

   * `stdin()` снимает один завершающий `\n`, и при наличии — `\r` перед ним (случай Windows CRLF).

4. **REPL-приглашение**

   * В отличие от `input(prompt)`, функция `stdin()` печатает приглашение в стиле:

     * `"{prompt}\n>>> "` или просто `">>> "`
       Это сделано специально для наглядности и “диалогового” ощущения банкомата.

---

## 2) Домашнее задание “Cash Machine dialog” как полноценное приложение

Вместо последовательности строк вида:

```python
name = input(...)
print(...)
```

я сделал консольное приложение-симулятор банкомата, которое ведёт пользователя по процессу:

* создание счёта
* вход в существующий счёт
* внесение и снятие средств
* просмотр баланса

При этом весь ввод/вывод выполняется через `stdin()`/`stdout()`.

---

## 3) Архитектура: MVC в одном модуле (учебный вариант)

Приложение организовано в рамках одного Python-модуля (как и требовалось), но структурировано по MVC:

### Model

* `Account` — данные пользователя и счёта: `name`, `surname`, `id`, `account_number`, `balance`, данные PIN (не в открытом виде).

### View

* `ConsoleView` — все взаимодействия с пользователем:

  * вывод сообщений
  * запросы данных (имя/фамилия/id)
  * ввод PIN
  * ввод денежных сумм
  * меню

### Controller

* `ATMController` — основная логика сценариев:

  * первый запуск
  * создание аккаунта
  * вход
  * операции пополнения/снятия
  * управление меню

---

## 4) Хранение данных

Данные сохраняются на диск в JSON-файл (один файл на всё приложение):

* аккаунты хранятся по ключу `account_number`
* при запуске приложение считывает файл и понимает: “первый запуск” это или нет

PIN-код не хранится в открытом виде: сохраняется соль + хэш (через `sha256`), что остаётся в рамках стандартной библиотеки и демонстрирует базовые принципы безопасного хранения секретов.

---

## 5) Логика работы приложения: сценарии

### Первый запуск (аккаунтов ещё нет)

1. Появляется приветствие.
2. Пользователь нажимает Enter, чтобы продолжить.
3. Программа запрашивает:

   * `name`
   * `surname`
   * `id`
4. Генерируется `account_number` и показывается пользователю **один раз**.
5. Пользователь создаёт `pin` (ввод два раза для подтверждения).
6. Всё сохраняется в JSON.
7. Пользователю предлагается внести стартовую сумму на счёт.
8. Затем открывается главное меню операций.

### Все последующие запуски

1. Приветствие.
2. Выбор:

   * создать новый счёт
   * войти в существующий
3. Для входа:

   * ввод номера счёта
   * ввод PIN
4. Если данные верны — открывается главное меню.

---

## 6) Главное меню (после входа/создания)

Доступны действия:

1. Внести деньги
2. Снять деньги
3. Показать баланс
4. Выход

Проверки:

* суммы должны быть корректным числом
* снятие невозможно, если на балансе недостаточно средств

---

## 7) Как запустить (инструкции)

1. Сохранить файл приложения.
2. Запуск:

   * `python hw.py`
3. Данные будут сохранены в `atm_data.json` рядом с модулем (если не задан другой путь).

---

## 8) Почему я сделал именно так

Цель была не “усложнить ради сложности”, а показать, что даже тема первой лекции может быть глубже и практичнее:

* ввод/вывод — это работа с потоками (`sys.stdin/sys.stdout`),
* даже базовые переменные и I/O можно собрать в понятный проект,
* архитектура (пусть и учебная) помогает держать код читаемым и расширяемым.

Спасибо за курс и за базовую рамку задания — она отлично подошла, чтобы построить маленький, но цельный учебный проект на Python.

С уважением,
Кирилл
